  <!DOCTYPE html>
<html lang="en">
 <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Egdod test</title>
    <script type="text/javascript" src="Cindy.js"></script>
</head>

<body style="font-family:Palatino; margin:0; font-size:16pt">







<script id='init' type='text/x-cindyscript'>

// **********************************************************************************************************
// Start ****************************************************************************************************
// **********************************************************************************************************
canvascorners = apply(screenbounds(), #.xy); //LO, RO, RU, LU
canvascenter  = 0.5 * canvascorners_1 + 0.5 * canvascorners_3;
canvaswidth   = dist(canvascorners_1, canvascorners_2);
canvasheight  = dist(canvascorners_1, canvascorners_4);












testCircle = {
  "x":     canvascenter.x,
  "y":     canvascenter.y,
  "size":  0.5,
  "color": (1,0,0)
};
drawTestCircle(obj) := (
  fillcircle([obj.x, obj.y], obj.size, color->obj.color);
);





text1 = {
  "x":              canvascorners_1.x + 1,
  "y":              canvascorners_1.y - 2,
  "text":           "This is just a test.",
  "percentVisible": 1,
  "size":           30,
  "color":          (0,0.5,0.5),
  "align":          "left"
};




func(x) := 0.3 * sin(3 * x) * exp(x);

graph1 = {
  "name":     "func",
  "x":        canvascenter.x + 5,
	"y":        canvascenter.y,
	"scale":    8,
	"start":    0,
	"stop":     0,
	"color":    (1,0,0),
	"lineSize": 3
};


line1 = createRootLineObject(canvascenter, (0.3, 0.3, 0.3));


hNumber = 16;
quiverRoots   = apply(0..(hNumber - 1), canvascenter + [sin(2*pi*#/hNumber), cos(2*pi*#/hNumber)]);
quiverTargets = apply(0..(hNumber - 1), canvascenter + [12 - 1.5*#, 5]);
quiver = createRootQuiver(quiverRoots, (0.3, 0.3, 0.3));
cascade = setupAnimationCascade(hNumber, 1, 1, 0.01);




animationTrack1 = setupAnimationTrack(0, 1);


playanimation();
setupTime();
runAnimationCascade(cascade);
</script>
<script src="egdodColor.js" data-scriptid="init"></script>
<script src="egdodMath.js" data-scriptid="init"></script>
<script src="egdodAnim.js" data-scriptid="init"></script>





<script id='draw' type='text/x-cindyscript'>
  drawTextObject(text1);
  drawLineObject(line1);

  drawQuiver(quiver);
</script>



<script id='tick' type='text/x-cindyscript'>
  delta = deltaTime();
  updateAnimationTrack(animationTrack1, delta);
  updateAnimationCascade(cascade, delta);

  //tween(text1, "percentVisible", 0, 1, animationTrack1);
  constructQuiver(quiver, quiverTargets, 2, true, cascade);

</script>



<script id='mouse_down' type='text/x-cindyscript'>
</script>

<script id='mouse_drag' type='text/x-cindyscript'>
</script>

<script id='mouse_up' type='text/x-cindyscript'>
</script>


<div id="canvasesdiv" style="position:relative; width:800px; height:600px; border:2px solid #000000;">
<canvas id="CSCanvas" align="left" valign="top" width="800" height="600" style="z-index: 2; position:absolute; left: 0px; top: 0px"></canvas>
</div>



<script>

</script>

<script>

    cindy = createCindy({canvasname:"CSCanvas",
                 drawscript:"draw",
                 initscript:"init",
                 mousedownscript:"mouse_down",
                 mousedragscript:"mouse_drag",
                 mouseupscript:"mouse_up",
                 tickscript:"tick"
                });

</script>







</body>

</html>
