  <!DOCTYPE html>
<html lang="en">
 <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Egdod test</title>
    <script type="text/javascript" src="Cindy.js"></script>
</head>

<body style="font-family:Palatino; margin:0; font-size:16pt">







<script id='init' type='text/x-cindyscript'>

// **********************************************************************************************************
// Start ****************************************************************************************************
// **********************************************************************************************************
canvascorners = apply(screenbounds(), #.xy); //LO, RO, RU, LU
canvascenter  = 0.5 * canvascorners_1 + 0.5 * canvascorners_3;
canvaswidth   = dist(canvascorners_1, canvascorners_2);
canvasheight  = dist(canvascorners_1, canvascorners_4);












testCircle = {
  "x":     canvascenter.x,
  "y":     canvascenter.y,
  "size":  0.5,
  "color": (1,0,0)
};
drawTestCircle(obj) := (
  fillcircle([obj.x, obj.y], obj.size, color->obj.color);
);





text1 = {
  "x":              canvascorners_1.x + 1,
  "y":              canvascorners_1.y - 2,
  "text":           "This is just a test.",
  "percentVisible": 0,
  "size":           30,
  "color":          alicecolor("blue"),
  "align":          "left"
};






origin = canvascenter + [-5, -3];
graphSize = 12;

func1(x) := 0.3 * sin(10 * x) + (x^2);
func2(x) := easeInOutElastic(x);
func3(x) := x^2;

graph1 = {
  "name":     "func1",
  "x":        origin.x,
	"y":        origin.y,
	"scale":    graphSize,
	"start":    0,
	"stop":     0,
	"color":    aliceColor("red"),
	"lineSize": 5
};



vNumber = 8;
hNumber = 8;
testGrid = createRootGrid(origin, -0.03 * graphSize, -0.03 * graphSize, hNumber, vNumber, graphSize/vNumber, graphSize/hNumber, (0.6, 0.6, 0.6));
axisX = createRootLineObject(origin + (-0.05*graphSize, 0), (0.2, 0.2, 0.2));
axisY = createRootLineObject(origin + (0, -0.05*graphSize), (0.2, 0.2, 0.2));



animationTrack1 = setupAnimationTrack(0, 1);
animationTrack2 = setupAnimationTrack(1, 2);
animationTrack3 = setupAnimationTrack(1.5, 2.5);
cascade1 = setupAnimationCascade(vNumber, 2, 1, 0.1);
cascade2 = setupAnimationCascade(hNumber, 2.5, 1, 0.1);
animationTrack4 = setupAnimationTrack(4, 5);




animationTrack1.running = true;
animationTrack2.running = true;
animationTrack3.running = true;
animationTrack4.running = true;
runAnimationCascade(cascade1);
runAnimationCascade(cascade2);
</script>
<script src="egdodColor.js" data-scriptid="init"></script>
<script src="egdodMath.js" data-scriptid="init"></script>
<script src="egdodAnim.js" data-scriptid="init"></script>





<script id='draw' type='text/x-cindyscript'>
  drawTextObject(text1);
  
  drawGrid(testGrid);
  drawLineObject(axisX);
  drawLineObject(axisY);
  
  drawGraphObject(graph1);
</script>



<script id='tick' type='text/x-cindyscript'>
  delta = deltaTime();
  updateAnimationTrack(animationTrack1, delta);
  updateAnimationTrack(animationTrack2, delta);
  updateAnimationTrack(animationTrack3, delta);
  updateAnimationTrack(animationTrack4, delta);
  updateAnimationCascade(cascade1, delta);
  updateAnimationCascade(cascade2, delta);
  
  tween(text1, "percentVisible", 0, 1, animationTrack1);
  
  constructLineObject(axisX, origin + [1.1 * graphSize, 0], 3, true, animationTrack2);
  constructLineObject(axisY, origin + [0, 1.1 * graphSize], 3, true, animationTrack3);
  constructGrid(testGrid, graphSize, graphSize, 1, false, cascade2, cascade1);
  
  tween(graph1, "stop", 0, 1, animationTrack4, "EaseInOutQuad");
</script>



<script id='mouse_down' type='text/x-cindyscript'>
  playanimation();
  setupTime();
</script>

<script id='mouse_drag' type='text/x-cindyscript'>
</script>

<script id='mouse_up' type='text/x-cindyscript'>
</script>


<div id="canvasesdiv" style="position:relative; width:800px; height:600px; border:0px solid #000000;">
<canvas id="CSCanvas" align="left" valign="top" width="800" height="600" style="z-index: 2; position:absolute; left: 0px; top: 0px"></canvas>
</div>



<script>

</script>

<script>

    cindy = createCindy({canvasname:"CSCanvas",
                 drawscript:"draw",
                 initscript:"init",
                 mousedownscript:"mouse_down",
                 mousedragscript:"mouse_drag",
                 mouseupscript:"mouse_up",
                 tickscript:"tick"
                });

</script>







</body>

</html>
