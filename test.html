  <!DOCTYPE html>
<html lang="en">
 <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Egdod test</title>
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/Cindy.js"></script>
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/CindyGL.js"></script>
  </head>

<body style="font-family:Palatino; margin:0; font-size:16pt">







<script id='csinit' type='text/x-cindyscript'>
strokeSampleRateEBOW = 128;
generatePoints() := (
  forall(1..5,
    createpoint("P" + #, [lerp(canvasLeft, canvasRight, #, 0, 6), canvasCenter.y + (2 * random() - 1) * 8]);
  );  
  P1.y = canvasCenter.y;
  P5.y = canvasCenter.y;
  P3.xy = canvasCenter + (0, 3);

);
generatePoints();
forall(allpoints(), 
  #.labeled = false;
  #.color = aliceColor("blue");
  #.size = 3;
  #.alpha = 0;
);







strokeColors = [
  aliceColor("orange"),
  aliceColor("turquoise"),
  aliceColor("violet")
];




rollIndex = 1;




sample() := (
  points = apply(allpoints(), #.xy);
  if(rollIndex == 1, stroke = samplePolygon(points, false));    
  if(rollIndex == 2, stroke = sampleCatmullRomSpline(points));    
  if(rollIndex == 3, stroke = sampleLagrangeInterpolation(points));    

  markers = resample(stroke, 5);
);


sample();

tracks = [
  setupAnimationTrack(0, 3);
];


playanimation();
setupTime();
</script>

<script src="egdod.js"></script>




<script id='csdraw' type='text/x-cindyscript'>
sample();
connect(stroke, size -> 3, color -> strokeColors_rollIndex);
forall(markers,
  fillcircle(#, 0.3, color -> aliceColor("red"));
);
</script>



<script id='cstick' type='text/x-cindyscript'>
  delta = deltaTime();

  updateAnimationCascade(tracks, delta);

  P3.xy = canvasCenter + 3 * [sin(tracks_1.progress * 2 * pi), cos(tracks_1.progress * 2 * pi)];

  if(now() > 4,
  rollIndex = rollIndex + 1;
  if(rollIndex > 3, rollIndex = 1);
  generatePoints();
  setupTime();
  );
</script>


<script id='csmousemove' type='text/x-cindyscript'>
</script>

<script id='csmousedown' type='text/x-cindyscript'>
</script>

<script id='csmousedrag' type='text/x-cindyscript'>
</script>

<script id='csmouseup' type='text/x-cindyscript'>
</script>

<!-- <script id='cskeydown' type='text/x-cindyscript'>
</script> -->


<canvas id="CSCanvas" align="left" valign="top" width="800" height="600" style="border:0px solid #000000;"></canvas>





<script>
  cindy = createCindy({canvasname:"CSCanvas",
    scripts:"cs*",
    images: {
    }
  });

</script>







</body>

</html>
