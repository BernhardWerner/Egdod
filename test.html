  <!DOCTYPE html>
<html lang="en">
 <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Egdod test</title>
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/Cindy.js"></script>
  </head>

<body style="font-family:Palatino; margin:0; font-size:16pt">







<script id='init' type='text/x-cindyscript'>

// **********************************************************************************************************
// Start ****************************************************************************************************
// **********************************************************************************************************
canvascorners = apply(screenbounds(), #.xy); //LO, RO, RU, LU
canvascenter  = 0.5 * canvascorners_1 + 0.5 * canvascorners_3;
canvaswidth   = dist(canvascorners_1, canvascorners_2);
canvasheight  = dist(canvascorners_1, canvascorners_4);



startButton = {
  "position": (canvascorners_3 + [-4, 2]),
  "size":     [2.5, 1.5],
  "label":    "play",
  "textSize": 20,
  "colors":   (apply(0..2, aliceColor("blue", 1 - #))),
  "corner":   0.4,
  "pressed":  false
};




createimage("background", 800, 800);

backgroundShader(uv) := (
  perlinNoise(30 * uv);
);


println(randomGradient([3,4]));





origin = canvascenter + [-3, -3];

function(x) := x^2;

testGraph = createRootStrokeObject(origin, aliceColor("blue"), aliceColor("blue"), 0);
testGraph.arrow = true;
testGraph.stroke = sampleCircle(2, 2*pi);
testGraph.stroke = sampleFunctionGraph("function", -2, 3);


testLine = createRootStrokeObject(origin + [-3, -2], aliceColor("red"), aliceColor("red"), 0);
testLineOldStroke = sampleBezierLin([0,0], [7,2]);
testLineNewStroke = sampleBezierCube([0,0], [1,2], [4, 0], [7,2]);
testLine.stroke = testLineOldStroke;
testLine.arrow = true;

animationTrack1 = setupAnimationTrack(0, 2);
animationTrack2 = setupAnimationTrack(1, 2);

</script>
<script src="egdodColor.js" data-scriptid="init"></script>
<script src="egdodArray.js" data-scriptid="init"></script>
<script src="egdodUI.js" data-scriptid="init"></script>
<script src="egdodMath.js" data-scriptid="init"></script>
<script src="egdodAnim.js" data-scriptid="init"></script>
<script src="egdodShader.js" data-scriptid="init"></script>





<script id='draw' type='text/x-cindyscript'>
colorplot((0,0), (1,0), "background", backgroundShader(#));
drawimage(canvascorners_4, canvascorners_4 + (20,0), "background");


drawButton(startButton);
  
//drawStrokeObject(testGraph);
//drawStrokeObject(testLine);

</script>



<script id='tick' type='text/x-cindyscript'>
  delta = deltaTime();
  updateAnimationTrack(animationTrack1, delta);
  updateAnimationTrack(animationTrack2, delta);


  constructStrokeDraw(testGraph, 5, 0.5, animationTrack1);  
  constructStrokeDraw(testLine, 5, 0.5, animationTrack1);  
  
  tween(testLine, "stroke",testLineOldStroke, testLineNewStroke, animationTrack2);


</script>



<script id='mouse_down' type='text/x-cindyscript'>
  if(mouseInButton(startButton),
  startButton.pressed = true;
  
  playanimation();
  setupTime();
  );  
  
</script>

<script id='mouse_drag' type='text/x-cindyscript'>
</script>

<script id='mouse_up' type='text/x-cindyscript'>
</script>


<div id="canvasesdiv" style="position:relative; width:800px; height:600px; border:2px solid #000000;">
<canvas id="CSCanvas" align="left" valign="top" width="800" height="600" style="z-index: 2; position:absolute; left: 0px; top: 0px"></canvas>
</div>




<script>
  cindy = createCindy({canvasname:"CSCanvas",
                drawscript:"draw",
                initscript:"init",
                mousedownscript:"mouse_down",
                mousedragscript:"mouse_drag",
                mouseupscript:"mouse_up",
                tickscript:"tick",
                images: {
                   runner1: "runner_1.jpg",
                   runner2: "runner_2.jpg",
                   runner3: "runner_3.jpg",
                }
               });
  
</script>







</body>

</html>
