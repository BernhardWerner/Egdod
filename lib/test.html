  <!DOCTYPE html>
<html lang="en">
 <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Egdod test</title>
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/Cindy.js"></script>
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/CindyGL.js"></script>
  </head>

<body style="font-family:Palatino; margin:0; font-size:16pt">







<script id='csinit' type='text/x-cindyscript'>
func(x) := 15 * exp(-(sin(x / 3) * x / 5 - 2)^2);

nos = 1000;
samples = apply(1..nos, [lerp(canvasLeft, canvasRight, #, 1, nos), func(lerp(canvasLeft, canvasRight, #, 1, nos))]);


lengthLUT = [[canvasLeft, 0]];
forall(1..nos - 1,
  x1 = lerp(canvasLeft, canvasRight, #,     1, nos);
  x2 = lerp(canvasLeft, canvasRight, # + 1, 1, nos);
  lengthLUT = lengthLUT :> [x2, lengthLUT_(-1).y + dist([x1, func(x1)], [x2, func(x2)])];
);

equiPoints(nop) := (
  correction = if(fract(nop) > 0, 0.5, 0);
  apply(1..nop - correction,
    l = lerp(0, lengthLUT_(-1).y, #, 1, nop);
    x = evalLUTbackwards(lengthLUT, l);
    [x, func(x)];
  );
);

number = 2;


track = setupAnimationTrack(0, 10);
track.looping = true;

setupTime();
playanimation();
</script>

<script src="egdod.js"></script>




<script id='csdraw' type='text/x-cindyscript'> 

plot(func(x), start -> canvasLeft, stop -> canvasRight, size -> 5, color -> sapColor.blue);

drawall(equiPoints(number), color -> sapColor.orange, size -> 6);

</script>



<script id='cstick' type='text/x-cindyscript'>
delta = deltaTime();

updateAnimationTrack(track, delta);

number = lerp(2, 20, sin(pi * track.progress)^2);
</script>


<script id='csmousemove' type='text/x-cindyscript'>


</script>

<script id='csmousedown' type='text/x-cindyscript'>
</script>

<script id='csmousedrag' type='text/x-cindyscript'>
</script>

<script id='csmouseup' type='text/x-cindyscript'>
</script>

<!-- <script id='cskeydown' type='text/x-cindyscript'>
</script> -->


<canvas id="CSCanvas" align="left" valign="top" width="800" height="800" style="border:1px solid #000000;"></canvas>





<script>
  cindy = createCindy({canvasname:"CSCanvas",
    scripts:"cs*",
    images: {
    },
    use:["katex"]
  });

</script>







</body>

</html>
