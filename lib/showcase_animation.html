  <!DOCTYPE html>
<html lang="en">
 <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Egdod test</title>
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/Cindy.js"></script>
  </head>

<body style="font-family:Palatino; margin:0; font-size:16pt">







<script id='init' type='text/x-cindyscript'>


// **********************************************************************************************************
// Start ****************************************************************************************************
// **********************************************************************************************************
strokeSamleRateEBOW = 256;


timeRect = rect(canvasCorners.bl, 0, 0.2);

func(x) := 2 * sin(x) + 1;

strokeStart = canvasCenter + (-5, 0);
strokeEnd = canvasCorners.tr + (-1, -1);

circleStroke = sampleCircle(2, 2*pi);
triangleStroke = samplePolygon([(0,0), (-4, 0), (0, -5)]);
functionStroke = 2 * sampleFunctionGraph("func", -1.2, 4.2);



origin = canvasCenter + (-6, -3);














animationTrack1 = setupAnimationTrack(0, 1);
animationTrack1.looping = true;

setupAnimation() := (

  strokeObject = createRootStrokeObject(strokeStart, aliceColor("orange"), aliceColor("orange"), 0.5);
  strokeObject.stroke = circleStroke;
  axisX = createRootStrokeObject(origin, (0,0,0), (1,1,1), 0);
  axisY = createRootStrokeObject(origin, (0,0,0), (1,1,1), 0);
  axisX.stroke = sampleBezierCurve([(-1, 0), (10, 0)]);
  axisY.stroke = sampleBezierCurve([(0, -1), (0, 10)]);
  axisX.arrow = true;
  axisY.arrow = true;
  gridH = apply(1..4,
    new = createRootStrokeObject(origin + (0, 2 * #), 0.7 * (1,1,1), (1,1,1), 0);
    new.stroke = axisX.stroke;

    new;
  );

  gridV = apply(1..4,
    new = createRootStrokeObject(origin + (2 * #, 0), 0.7 * (1,1,1), (1,1,1), 0);
    new.stroke = axisY.stroke;

    new;
  );

  grid = randsort(gridH ++ gridV);

  texFormula = createTexObject(canvasCenter + (-5, -6), "$\displaystyle    @\int€_{@0€}^{@\infty€} @\begin{pmatrix} @1€ & @2€ & @3€ \\ @4€ & @5€ & @6€ \\ @7€ & @8€ & @9€ \end{pmatrix}€ @=€ @?€   $", 25);





  
  
  tracks = [
    animationTrack1,
    setupAnimationTrack(1, 2.5),
    setupAnimationTrack(3, 4),
    setupAnimationTrack(5, 8),
    setupAnimationTrack(9, 10),
    setupAnimationTrack(9.1, 10.1),
    setupAnimationTrack(11.5, 12.5),
    setupAnimationTrack(13.5, 14.5)
  ];

  setupTime();  
); // end setupAnimation




setupAnimation();
playanimation();

</script>
<script src="egdod.js" data-scriptid="init"></script>




<script id='draw' type='text/x-cindyscript'>
  forall(gridH, drawStrokeObject(#));
  forall(gridV, drawStrokeObject(#));
  drawStrokeObject(axisX);
  drawStrokeObject(axisY);
  
  drawStrokeObject(strokeObject);

  drawTexObject(texFormula);
  
  
  fillrect(timeRect, aliceColor("blue", 2), 1.0);
</script>

<script id='tick' type='text/x-cindyscript'>
  delta = deltaTime();

  forall(tracks, updateAnimationTrack(#, delta));

  tween(timeRect, "w", 0, canvasWidth, tracks_1);
  

  typeTex(texFormula, tracks_2);
  fadeOut(texFormula, (0,-1), 5, tracks_3);


  constructStrokeDraw(strokeObject, 5, 0, tracks_3);
  

  tween(strokeObject, "pos", strokeStart, strokeEnd, tracks_4, "easeInOutCubic");
  tween(strokeObject, "lineColor", aliceColor("orange"), aliceColor("teal"), tracks_4, "easeInOutCubic");
  tween(strokeObject, "fillColor", aliceColor("orange"), aliceColor("teal"), tracks_4, "easeInOutCubic");
  tween(strokeObject, "stroke", circleStroke, triangleStroke, tracks_4, "easeInOutCubic");
  
  
  tween(strokeObject, "pos", strokeEnd, origin, tracks_7, "easeInOutCubic");
  tween(strokeObject, "lineColor", aliceColor("teal"), aliceColor("red"), tracks_7, "easeInOutCubic");
  tween(strokeObject, "fillColor", aliceColor("teal"), (1,1,1), tracks_7, "easeOutCirc");
  tween(strokeObject, "fillAlpha", 0.5, 0, tracks_7, "easeOutCirc");
  tween(strokeObject, "stroke", triangleStroke, functionStroke, tracks_7, "easeInOutCubic");


  
  constructStrokeDraw(axisX, 4, 0.5, tracks_5);
  constructStrokeDraw(axisY, 4, 0.5, tracks_5);

  constructStrokeDrawMany(grid, 2, 0, tracks_5, 0.05);

    
  tween(strokeObject, "lineAlpha", 1, 0, tracks_8);
  tween(axisX, "lineAlpha", 1, 0, tracks_8);
  tween(axisY, "lineAlpha", 1, 0, tracks_8);
  forall(grid, tween(#, "lineAlpha", 1, 0, tracks_8));

  if(computerSeconds() - scriptStartTimeEBOW > 14.5 & tracks_1.progress > 0.99, 
    setupAnimation();
  );
</script>




<script id='mouse_down' type='text/x-cindyscript'>





</script>


<script id='mouse_drag' type='text/x-cindyscript'>

  

</script>


  


<script id='mouse_up' type='text/x-cindyscript'>

  

</script>


<canvas id="CSCanvas" width="500" height="500" style="border:0px solid #000000;"></canvas>




<script>
  cindy = createCindy({canvasname:"CSCanvas",
                drawscript:"draw",
                initscript:"init",
                tickscript:"tick",
                mousedownscript:"mouse_down",
                mousedragscript: "mouse_drag",
                mouseupscript:"mouse_up",
                use: ["katex"]
               });
  
</script>







</body>

</html>
